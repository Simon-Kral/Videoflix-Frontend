<div class="wrapper">
	<div class="card">
		<form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()" autocomplete="off">
			<h1>Reset Password</h1>
			<p>Create a new password for your <span>Videoflix</span> account.</p>
			<div class="form_element">
				<div class="input_element" [ngClass]="{ invalid: utilityService.formInvalid(resetPasswordForm.controls.password) }">
					<input type="{{ utilityService.passwordType }}" placeholder="Enter a Password" formControlName="password" (focus)="utilityService.handlePasswordFieldFocus()" />
					<div class="input_img functional">
						<img src="{{ utilityService.passwordIcon }}" (click)="utilityService.handlePasswordMasking()" />
					</div>
				</div>
				<div class="element_errors">
					@if (utilityService.formInvalid(resetPasswordForm.controls.password)) {
					<img src="assets/icons/warning.webp" />
					@if (resetPasswordForm.controls.password.errors?.['required']) {
					<span class="error_message">Please enter a password.</span>
					} @if (resetPasswordForm.controls.password.errors?.['minlength']) {
					<span class="error_message"> The password must be at least 8 characters long. </span>
					} }
				</div>
			</div>
			<div class="form_element">
				<div class="input_element" [ngClass]="{ invalid: utilityService.formInvalid(resetPasswordForm.controls.confirmPassword) }">
					<input type="{{ utilityService.passwordType }}" placeholder="Confirm Password" formControlName="confirmPassword" (focus)="utilityService.handlePasswordFieldFocus()" />
					<div class="input_img functional">
						<img src="{{ utilityService.passwordIcon }}" (click)="utilityService.handlePasswordMasking()" />
					</div>
				</div>
				<div class="element_errors">
					@if (utilityService.formInvalid(resetPasswordForm.controls.confirmPassword)) {
					<img src="assets/icons/warning.webp" />
					@if (resetPasswordForm.controls.confirmPassword.errors?.['required']) {
					<span class="error_message">Please confirm your password.</span>
					} @if (resetPasswordForm.controls.confirmPassword.errors?.['passwordsMatch']) {
					<span class="error_message">{{resetPasswordForm.controls.confirmPassword.errors?.['passwordsMatch']}}</span>
					} }
				</div>
			</div>
			<div class="form_button_wrap">
				<div class="spinner_container">
					@if (utilityService.loading) {
					<img src="assets/icons/spinner_pale_blue.gif" class="loading_spinner" />
					}
				</div>
				<button class="btn_blue" type="submit" [disabled]="!resetPasswordForm.valid">
					<span>Reset my Password</span>
				</button>
			</div>
		</form>
	</div>
</div>
